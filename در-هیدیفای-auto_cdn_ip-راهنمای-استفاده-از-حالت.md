<div align=center>

قبل از شروع میتونید این ویدیو را ملاحظه کنید تا با کلیت کار آشنابشید

<a href="https://www.youtube.com/watch?v=kz_Ih__jS9c">
  <img width="50%" src="https://user-images.githubusercontent.com/125398461/228757045-7d8c83ed-72c2-46a7-b9ff-3ede38def4b3.jpg" />
</a>

برای جزییات بیشتر حتما این مقاله را تا آخر مطالعه کنید.

</div>

<div dir="rtl">

# راهنمای استفاده از حالت auto_cdn_ip در هیدیفای

همانطور که می دانید یکی از دغدغه های همیشگی کاربران هنگام استفاده از cdn کلادفلر؛ پیدا کردن روزمره آیپی های تمیز است. ما قبلا آموزش هایی در این خصوص ارائه کرده بودیم که راهنمای گام به گام یافتن این آیپی ها بود. می توانید از این لینک آن را مشاهده کنید.
خیلی وقت ها به دلایل متعدد امکان پیدا کردن این آیپی ها فراهم نیست. ما برای رفع این مشکل نیز راهکاری ارائه دادیم.

قابلیت auto_cdn_ip برای این درست شده تا این مشکل را برای شما حل کنه. در ادامه توضیحات را با دقت مطالعه کنید تا با نحوه تنظیم این قابلیت آشنا بشید.

## ثبت دامنه در حالت auto_cdn_ip

برای این کار به منوی دامنه بروید و دکمه ایجاد را بزنید. صفحه زیر برای شما باز می شود.
</div>

<div align=center>

![auto_cdn-ip](https://user-images.githubusercontent.com/125398461/228748531-5d1fbf3c-b023-4476-b44e-716e8f531825.png)
</div>

<div dir="rtl">
در ادامه هر کدام از قسمت ها مطابق با شماره توضیح داده خواهند شد.

### ۱. دامنه
در اینجا شما ساب دامنه ثبت شده خود در کلادفلر را وارد کنید. لازم به توضیح است که حتما باید پروکسی روشن باشد.
اگر برای ثبت دامنه نیاز به اطلاعات بیشتر دارید [این لینک](https://github.com/hiddify/hiddify-config/wiki/%D8%B1%D8%A7%D9%87%D9%86%D9%85%D8%A7%DB%8C-%D8%AA%D9%86%D8%B8%DB%8C%D9%85-%D8%AF%D8%A7%D9%85%D9%86%D9%87-%D9%88-%D9%86%D9%87%D8%A7%DB%8C%DB%8C-%DA%A9%D8%B1%D8%AF%D9%86-%D9%86%D8%B5%D8%A8) را ببینید.

### ۲. نام نمایشی
با استفاده از این فیلد شما می توانید یک نام دلخواه را برای این دامنه انتخاب کنید. دقت کنید که نام انتخاب شده قبلا برای دامین های دیگر در پنل ثبت نشده باشد. بهتر است از کاراکترهای فونت استاندارد (حروف و عدد) برای این فیلد استفاده شود.

### ۳. حالت
حالت را همانطور که مشخص است روی auto_cdn_ip قرار دهید.


### ۴. اجبار به استفاده از آیپی های زیر در کانفیگ CDN
اگر این فیلد خالی باشد؛ [لیست](https://ircf.space/export.php) آیپی های تمیزی که توسط سایت ircf.space به صورت مرتب بروزرسانی می شوند را تست می کنه و آیپی ای که روی نت کاربر بدون مشکل باشد را برمیگردونه.
</div>

```
mci.ircf.space MCI
mcix.ircf.space MCI
mtn.ircf.space MTN
mtnx.ircf.space MTN
rtl.ircf.space RTL
mkh.ircf.space MKH
hwb.ircf.space HWB
ast.ircf.space AST
sht.ircf.space SHT
prs.ircf.space PRS
mbt.ircf.space MBT
ask.ircf.space ASK
rsp.ircf.space RSP
afn.ircf.space AFN
ztl.ircf.space ZTL
psm.ircf.space PSM
arx.ircf.space ARX
smt.ircf.space SMT
```

<div dir="rtl">
توجه داشته باشید بین ساب دامین و تگ شبکه یک فاصله قرار داره و هر ردیف مشخص کننده آیپی تمیز برای یک اپراتوره. ردیف ها با اینتر از هم جدا میشن.

برای آشنایی تگ ها را معرفی می کنیم

```
MCI همراه اول
MTN ایرانسل
RTL رایتل
MKH مخابرات
HWB های وب
AST عصر تلکام
SHT شاتل
PRS پارس آنلاین
MBT مبین نت
ASK آسیاتک
RSP رسپینا
AFN افرانت
ZTL زیتل
PSM پیشگامان
ARX آراکس
SMT سامانتل
```

همچنین شما می تونید لیست را طبق فرمت زیر با قید ساب دامین مورد نظر و تگ آن شبکه محدود کنید.

</div>

```
mcix.ircf.space MCI
mtnx.ircf.space MTN
rtl.ircf.space RTL
```

<div dir="rtl">
یعنی طبق این فرمت اپراتورهایی که استفاده می کنید را وارد فیلد شماره ۴ کنید. هر ردیف را با اینتر از هم جدا کنید.

در صورتی که اپراتور در لیست نباشه؛ از خط اول استفاده میکنه

همینطور اگر خودتون لیست بهتری از آیپی ها با [روش های آموزش داده شده](https://github.com/hiddify/hiddify-config/wiki/%DA%86%DA%AF%D9%88%D9%86%DA%AF%DB%8C-%DB%8C%D8%A7%D9%81%D8%AA%D9%86-%D8%A2%DB%8C%D9%BE%DB%8C-%D8%AA%D9%85%DB%8C%D8%B2-%DA%A9%D9%84%D8%A7%D8%AF%D9%81%D9%84%D8%B1) قبلی دارید می تونید طبق همین فرمت ضمن ثبت ساب دامین (پروکسی خاموش) از آن ها استفاده کنید. مثلا:
</div>

```
mci.yourdomain.com MCI
mtn.yourdomain.com MTN
mkb.yourdomain.com MKB
```

<div dir="rtl">

یا حتی می تونید این لیست را به صورت آیپی وارد کنید. فرض کنید آیپی های تمیزی که برای شبکه های مختلف همراه اول؛ ایرانسل و مخابرات پیدا کرده اید؛ به ترتیب `1.1.1.1` ؛ `2.2.2.2` و `3.3.3.3` باشند؛ بنابراین اینطوری واردشون کنید
</div>

```
1.1.1.1 MCI
2.2.2.2 MTN
3.3.3.3 MKB
```
<div dir="rtl">


<b><i> نکته کلیدی: حتما توجه داشته باشید؛ برای اینکه پنل بتونه آیپی مناسب را تست بگیره و برگردونه ارتباط VPN باید قطع باشه. پس هر وقت اپراتورتون را عوض می کنید یه بار باید ارتباط VPN را قطع کنید در اپلیکیشم کلاینت کانکشن ها را آپدیت کنید تا تست انجام بشه و آیپی مناسب در کانکشن تون تنظیم بشه.</i></b>

### ۵. نمایش کانفیگ های دامنه ی
با استفاده از این قسمت می تونید کانفیگ های دامنه های دیگر را محدود کنید. که این فیلد برای هر کاربر و با توجه به شرایط مختلف متفاوت است. برای استفاده های غیر تجاری معمولا نیاز نیست که در این حالت از این فیلد استفاده کنید.

### ۶. ذخیره
در پایان دکمه ذخیره را بزنید تا تنظیمات دامنه اعمال شوند.

کار تمام است. حالا می تونید به لینک کاربر برید و کانفیگ های مرتبط با این دامنه را ملاظحه نمایید.

***
**نکته :** تفاوت حالت auto_cdn-ip با cdn این است که
* در حالت auto_cdnـip آیپی ای که پیدا میشه را بر میگردونه و در کانفیگ قرار میده. حالا یا از طریق فیلد شماره ۵ یا اگر خالی باشد به صورت خودکار.
* از طرف دیگه؛ حالت cdn اما دامنه را برمیگردونه و در کانفیگ قرار میده.. 

* حالا فرض کنید این دامنه فیلتر شده باشه (مثل دامنه ircf.space که فیلتره) در این حالت اگه از حالت cdn استفاده شده باشه؛ عملا ارتباط کلاینت قطع میمونه چون نمیتونه آیپی را ریزالو کنه. ولی حالت auto_cdn_ip که داره آیپی را هم براتون ریزالو میکنه عملا این محدودیت را هم دور میزنه.

پس با تمام این توضیحات بهتر هست از حالت auto_cdn_ip به جای cdn استفاده بشه.