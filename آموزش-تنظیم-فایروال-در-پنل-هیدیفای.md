[**![Lang_Eng](https://user-images.githubusercontent.com/125398461/229074810-599bd7f9-0bc1-44a9-b76e-90bf7e182314.png) English**](https://github.com/hiddify/hiddify-config/wiki/How-to-setup-Firewall-on-Hiddify-panel)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/hiddify/hiddify-config/wiki/%D9%87%D9%85%D9%87-%D8%A2%D9%85%D9%88%D8%B2%D8%B4%E2%80%8C%D9%87%D8%A7-%D9%88-%D9%88%DB%8C%D8%AF%D8%A6%D9%88%D9%87%D8%A7"><img width="100" src="https://github.com/hiddify/hiddify-config/assets/125398461/3704cd84-eee6-4c45-abe7-3c02936bbebb" /></a>

<div dir=rtl>

# آموزش تنظیم فایروال سرور

## فایروال چیست؟
فایروال یا دیواره‌ی آتش (Firewall) به نرم‌افزار یا سخت‌افزارهایی گفته می‌شود که از دسترسی به کامپیوترها یا سرورها جلوگیری کرده و ترافیک رد و بدل شده در شبکه را کنترل می‌کنند. فایروال در حقیقت یک ابزار امنیتی است که می‌تواند یک برنامه‌ی نرم‌افزاری یا یک دستگاه اختصاصی شبکه باشد. در اینجا ما با فایروال نرم‌افزاری روی سرورهای لینوکسی سر و کار داریم. 

<div align=center>

<img width="80%" src="https://github.com/hiddify/hiddify-config/assets/125398461/bd646159-3baa-45eb-8e30-810be5faadcb" />

</div>


فایروال سرورهای لینوکسی را به چند روش می‌توان مدیریت کرد که یکی از این روش‌ها استفاده از ابزاری به اسم `IP Tables` است.

در این ابزار یک سری Ruleها (قواعد) می‌توان تعریف نمود که با استفاده از آن‌ها به بسته‌های اطلاعاتی رو پروتکل‌های مختلف اجازه عبور داده می‌شود.


## تنظیمات خودکار فایروال از طریق پنل
هیدیفای به صورت دیفالت فایروال سیستم را روشن و کنترل می‌کند.
یعنی اگر در تنظیمات هیدیفای پورت پروتکل‌های `TLS` یا `HTTP` را تغییر دادید، پنل به صورت خودکار رول‌های مورد نیاز را ایجاد می‌کند. حتی این قابلیت وجود دارد که اگر پورت `SSH` را تغییر دادید، پنل این را متوجه شود و به صورت خودکار تنیمات فایروال را ایجاد نماید.

محل تنظیمات فایروال در پنل در بخش تنظیمات عمومی است.

![Screenshot_20230604_174724](https://github.com/hiddify/hiddify-config/assets/125398461/dfe98328-115a-43fb-b39d-5f6d9390d48e)

> توصیه خیلی مهم: به هیچ عنوان فایروال پنل را خاموش نکنید. خاموش کردن فایروال امنیت شما را به خطر می‌اندازد.

## تنظیم دستی فایروال سرور


* در صورت نیاز به باز نمودن پورت به صورت دستی، ابتدا به سرور خود `SSH` بزنید. اگر نمی‌دانید چگونه SSH بزنید این آموزش را ببینید.

* پس اتصال SSH وارد منوی هیدیفای می‌شوید. در اینجا با زدن `Cancel` یا `ctrl+c` از این منو خار شوید تا وارد ترمینال شوید.


*  در ترمینال از دستور زیر استفاده کنید.

<div dir=ltr>

```
iptables -A INPUT -p tcp --destination-port PORT -j ACCEPT
```

</div>

* کافیه پورت مورد نظر خود را جایگزین `PORT` در کامند بالا کنید. فرض کنید می‌خواهید پورت `۱۲۳۴` را باز کنید. کافیه دستور بالا را به این شکل تغییر بدهید و در ترمینال وارد کنید.


<div dir=ltr>

```
iptables -A INPUT -p tcp --destination-port 1234 -j ACCEPT
```

</div>

* یا اگر خواستید دسترسی پینگ یا بسته‌های `ICMP` را فراهم نمایید؛ کافیه دستور زیر را اجرا کنید.

<div dir=ltr>

```
iptables -A INPUT -p ICMP -j ACCEPT
```
</div>

کار تمام است.