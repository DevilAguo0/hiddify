[**![Lang_Eng](https://user-images.githubusercontent.com/125398461/229074810-599bd7f9-0bc1-44a9-b76e-90bf7e182314.png) English**](https://github.com/hiddify/hiddify-config/wiki/How-to-monitor-server-resources-on-Hiddify)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://github.com/hiddify/hiddify-config/wiki/%D9%87%D9%85%D9%87-%D8%A2%D9%85%D9%88%D8%B2%D8%B4%E2%80%8C%D9%87%D8%A7-%D9%88-%D9%88%DB%8C%D8%AF%D8%A6%D9%88%D9%87%D8%A7"><img width="100" src="https://github.com/hiddify/hiddify-config/assets/125398461/3704cd84-eee6-4c45-abe7-3c02936bbebb" /></a>

<div dir=rtl>

# کنترل منابع سرور در هیدیفای

خیلی وقت‌ها نیاز است که شما وضعیت منابع سرور یعنی CPU و RAM سرور خود را چک کنید. مثلا هنگامی که هنگی وجود دارد. برای این کار به چند روش می‌توانید این منابع را مانیتور کنید.

## استفاده از بخش داشبورد در پنل
برای اینکه از وضعیت استفاده CPU و RAM خود مطلع بشید، به بخش داشبورد در پنل هیدیفای بروید. در اینجا اطلاعات مختلف و مفیدی دریاره وضعیت منابع سیستم و همچنین اطلاعات ترافیک کارت شبکه و کاربران آنلاین به صورت یکپارچه قابل مشاهده است.

![داشبورد هیدیفای](https://user-images.githubusercontent.com/125398461/236671492-9ffc4521-ea2a-4fcb-bfd9-c071ac5a3d4d.png)


## کنترل منابع با استفاده از ابزار htop
یکی از ابزارهایی که برای کنترل منابع در سرورهای لینوکسی می‌توان استفاده نمود، htop می‌باشد.




* ابتدا به سرور [SSH بزنید](https://github.com/hiddify/hiddify-config/wiki/SSH-%D8%A2%D9%85%D9%88%D8%B2%D8%B4-%D8%A7%D8%AA%D8%B5%D8%A7%D9%84-%D8%A8%D9%87-%D8%B3%D8%B1%D9%88%D8%B1-%D8%A7%D8%B2-%D8%B7%D8%B1%DB%8C%D9%82).

*  و با زدن `Cancel` و یا فشردن همزمان کلیدهای `ctrl+c` از منوی هیدیفای خارج شوید. در صورتی که بعد از اینکار همچنان منو برای شما نمایش داده می‌شود عبارت `clear` رو تایپ و اینتر کنید.
* سپس اگر `htop` روی سرور شما نصب نیست، از طریق دستور زیر آن را نصب کنید

<div dir=ltr>

```
apt install htop
```
</div>

> معمولا روی ابونتو ۲۰.۰۴ و ۲۲.۰۴ این برنامه به صورت پیش‌فرض نصب است.

* سپس این دستور را اجرا کنید تا `htop` باز شود.

![photo_2023-06-04_20-35-25](https://github.com/hiddify/hiddify-config/assets/125398461/38c5ab1f-8fed-49c9-9455-04c7a7e83917)


از این برنامه می‌توانید میزان مصرف منابع سرورتان توسط هر process را مشاهده کنید.

*  برای مشاهده میزان مصرف `CPU` هر process، روی `CPU` کلیک کنید تا بر این اساس مرتب شود و ببینید کدوم process درصد بیشتری از `CPU` رو به خودش اختصاص داده است.

* همچنین برای مشاهده میزان مصرف `RAM` توسط هر process، روی `MEM` کلیک کنید تا بر این اساس مرتب شود.

* در صورتی که بیشترین منابع را سرویس‌های هیدیفای  (مثل hidiffy-panel، hiddify-nginx, hiddify-xray و ...)استفاده می‌کنند، از htop خارج شوید. 

> برای خارج شدن از محیط htop باید کلیدهای `ctrl+c` یا `q` رو فشار بدید.

* سپس یکبار از طریق دستور زیر وارد منوی هیدیفای شوید.

<div dir=ltr>

```
bash /opt/hiddify-config/menu.sh
```
</div>


*  با استفاده از کلیدهای جهتی (بالا و پایین) گزینه‌ی `restart` را انتخاب کنید و صبر کنید تا سرویس‌ها ریستارت شوند و مجددا از منوی هیدیفای خارج شوید و `htop` را بررسی کنید.




## خالی کردن حافظه رم
حافظه رم در واقع حافظه موقت هست که سرویس های در حال اجرا فضاش رو اشغال میکنند، بخشش توسط خود سیستم عامل اشغال میشه و بخشی هم سرویس های در حال اجرا، 
پر شدن رم به تعداد کاربر ربطی نداره، شما هر چندتا کاربر داشته باشید یک سری سرویس ها باید در حال اجرا باشند تا سیستم عامل و سرویس های جانبی کار کنند!
مدیریت رم با سیستم عامل هست اگر سرورتون ۲گیگ رم داشته باشه تا ۸۰ درصد پر شدن مشکلی ایجاد نمیکنه

سرور را ریبوت نکنید.

میتونید سرچ کنید. مثلا یکی از راه‌ها خالی کردن حافظه کش رم هست. با این کامند در یوزر روت؛

sync && systemctl -w vm.drop_caches=3

‼️حتما توجه کنید با یوزر روت باشید و بعد این کامند را اجرا کنید